<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 600">
  <defs>
    <style>
      .title { font: bold 24px system-ui, sans-serif; fill: #1a1a2e; }
      .phase-label { font: bold 14px system-ui, sans-serif; fill: #6b7280; letter-spacing: 2px; }
      .box-label { font: bold 13px system-ui, sans-serif; fill: white; }
      .box-detail { font: 11px system-ui, sans-serif; fill: white; opacity: 0.9; }
      .arrow { fill: none; stroke: #9ca3af; stroke-width: 2; }
      .arrow-head { fill: #9ca3af; }
      .connector { stroke: #d1d5db; stroke-width: 2; stroke-dasharray: 4; }
    </style>
    <linearGradient id="acquire" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3b82f6"/>
      <stop offset="100%" style="stop-color:#1d4ed8"/>
    </linearGradient>
    <linearGradient id="process" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#8b5cf6"/>
      <stop offset="100%" style="stop-color:#6d28d9"/>
    </linearGradient>
    <linearGradient id="publish" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#10b981"/>
      <stop offset="100%" style="stop-color:#059669"/>
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="4" stdDeviation="8" flood-opacity="0.15"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="1000" height="600" fill="#fafafa"/>

  <!-- Title -->
  <text x="500" y="45" text-anchor="middle" class="title">Source Library Pipeline</text>

  <!-- Phase Labels -->
  <text x="150" y="90" text-anchor="middle" class="phase-label">ACQUIRE</text>
  <text x="500" y="90" text-anchor="middle" class="phase-label">PROCESS</text>
  <text x="850" y="90" text-anchor="middle" class="phase-label">PUBLISH</text>

  <!-- Acquire Column -->
  <g filter="url(#shadow)">
    <rect x="50" y="110" width="200" height="180" rx="12" fill="url(#acquire)"/>
    <text x="150" y="145" text-anchor="middle" class="box-label">Import Sources</text>
    <line x1="70" y1="160" x2="230" y2="160" stroke="white" stroke-opacity="0.3"/>
    <text x="150" y="185" text-anchor="middle" class="box-detail">Internet Archive</text>
    <text x="150" y="205" text-anchor="middle" class="box-detail">IIIF Manifests</text>
    <text x="150" y="225" text-anchor="middle" class="box-detail">PDF Upload</text>
    <text x="150" y="245" text-anchor="middle" class="box-detail">Manual Entry</text>
    <text x="150" y="275" text-anchor="middle" class="box-detail">EFM Catalog</text>
  </g>

  <!-- Arrow to Process -->
  <path d="M 260 200 L 290 200" class="arrow" marker-end="url(#arrowhead)"/>
  <polygon points="295,200 285,195 285,205" class="arrow-head"/>

  <!-- Process Column -->
  <g filter="url(#shadow)">
    <rect x="310" y="110" width="180" height="100" rx="12" fill="url(#process)"/>
    <text x="400" y="145" text-anchor="middle" class="box-label">Split Detection</text>
    <line x1="330" y1="160" x2="470" y2="160" stroke="white" stroke-opacity="0.3"/>
    <text x="400" y="185" text-anchor="middle" class="box-detail">Detect 2-page spreads</text>
    <text x="400" y="203" text-anchor="middle" class="box-detail">Crop non-destructively</text>
  </g>

  <path d="M 400 220 L 400 245" class="arrow"/>
  <polygon points="400,250 395,240 405,240" class="arrow-head"/>

  <g filter="url(#shadow)">
    <rect x="310" y="255" width="180" height="100" rx="12" fill="url(#process)"/>
    <text x="400" y="290" text-anchor="middle" class="box-label">OCR</text>
    <line x1="330" y1="305" x2="470" y2="305" stroke="white" stroke-opacity="0.3"/>
    <text x="400" y="328" text-anchor="middle" class="box-detail">Gemini Vision API</text>
    <text x="400" y="346" text-anchor="middle" class="box-detail">Language-aware prompts</text>
  </g>

  <path d="M 400 365 L 400 390" class="arrow"/>
  <polygon points="400,395 395,385 405,385" class="arrow-head"/>

  <g filter="url(#shadow)">
    <rect x="310" y="400" width="180" height="100" rx="12" fill="url(#process)"/>
    <text x="400" y="435" text-anchor="middle" class="box-label">Translate</text>
    <line x1="330" y1="450" x2="470" y2="450" stroke="white" stroke-opacity="0.3"/>
    <text x="400" y="473" text-anchor="middle" class="box-detail">Latin/German to English</text>
    <text x="400" y="491" text-anchor="middle" class="box-detail">Previous page context</text>
  </g>

  <g filter="url(#shadow)">
    <rect x="510" y="255" width="180" height="100" rx="12" fill="url(#process)"/>
    <text x="600" y="290" text-anchor="middle" class="box-label">Summarize</text>
    <line x1="530" y1="305" x2="670" y2="305" stroke="white" stroke-opacity="0.3"/>
    <text x="600" y="328" text-anchor="middle" class="box-detail">Per-page summaries</text>
    <text x="600" y="346" text-anchor="middle" class="box-detail">Full-text search index</text>
  </g>

  <path d="M 490 450 L 520 450 L 520 355 L 510 355" class="arrow"/>
  <polygon points="510,355 520,350 520,360" class="arrow-head"/>

  <!-- Arrow to Publish -->
  <path d="M 690 305 L 730 305" class="arrow"/>
  <polygon points="735,305 725,300 725,310" class="arrow-head"/>

  <!-- Publish Column -->
  <g filter="url(#shadow)">
    <rect x="750" y="110" width="200" height="100" rx="12" fill="url(#publish)"/>
    <text x="850" y="145" text-anchor="middle" class="box-label">Read</text>
    <line x1="770" y1="160" x2="930" y2="160" stroke="white" stroke-opacity="0.3"/>
    <text x="850" y="183" text-anchor="middle" class="box-detail">Parallel text viewer</text>
    <text x="850" y="201" text-anchor="middle" class="box-detail">Highlights & search</text>
  </g>

  <g filter="url(#shadow)">
    <rect x="750" y="230" width="200" height="100" rx="12" fill="url(#publish)"/>
    <text x="850" y="265" text-anchor="middle" class="box-label">Annotate</text>
    <line x1="770" y1="280" x2="930" y2="280" stroke="white" stroke-opacity="0.3"/>
    <text x="850" y="303" text-anchor="middle" class="box-detail">Community comments</text>
    <text x="850" y="321" text-anchor="middle" class="box-detail">Scholarly corrections</text>
  </g>

  <g filter="url(#shadow)">
    <rect x="750" y="350" width="200" height="100" rx="12" fill="url(#publish)"/>
    <text x="850" y="385" text-anchor="middle" class="box-label">Edition</text>
    <line x1="770" y1="400" x2="930" y2="400" stroke="white" stroke-opacity="0.3"/>
    <text x="850" y="423" text-anchor="middle" class="box-detail">DOI via Zenodo</text>
    <text x="850" y="441" text-anchor="middle" class="box-detail">EPUB / PDF export</text>
  </g>

  <!-- Connectors between publish items -->
  <line x1="850" y1="210" x2="850" y2="230" class="connector"/>
  <line x1="850" y1="330" x2="850" y2="350" class="connector"/>

  <!-- Footer -->
  <text x="500" y="570" text-anchor="middle" style="font: 12px system-ui; fill: #9ca3af;">
    Source Library v2 â€” Embassy of the Free Mind
  </text>
</svg>
